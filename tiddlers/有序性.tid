created: 20220630024728809
creator: Lconfident
modified: 20220630024934236
modifier: Lconfident
tags: 内存模型三大特性
title: 有序性
type: text/vnd.tiddlywiki

在本线程内观察，所有操作都是有序的。

在一个线程观察另一个线程，所有操作都是无序的，无序是因为发生了指令重排序。

在 Java 内存模型中，允许编译器和处理器对指令进行重排序，重排序过程不会影响到单线程程序的执行，却会影响到''多线程并发执行''的正确性

* volatile 关键字通过''添加内存屏障''的方式来''禁止指令重排''，即重排序时不能把后面的指令放到内存屏障之前
* 也可以通过 synchronized 来保证有序性，它保证每个时刻只有一个线程执行同步代码，相当于是让线程顺序执行''同步代码''